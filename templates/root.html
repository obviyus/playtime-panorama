<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Playtime Panorama</title>
	<style>
		:root {
			color-scheme: dark;
			font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
			background-color: #080808;
			color: #f5f5f5;
		}

		body {
			margin: 0;
			min-height: 100vh;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			gap: 1.5rem;
			padding: 2rem;
			background-color: #080808;
		}

		main {
			max-width: 32rem;
			width: 100%;
			background-color: #0d0d0d;
			border: 1px solid #222;
			border-radius: 1rem;
			padding: 2rem;
			box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
		}

		h1 {
			margin: 0 0 0.75rem;
			font-size: clamp(1.75rem, 2vw + 1.2rem, 2.4rem);
			line-height: 1.1;
			letter-spacing: -0.02em;
		}

		p {
			margin: 0 0 1.25rem;
			color: #bbbbbb;
			line-height: 1.5;
		}

		form {
			display: grid;
			gap: 1rem;
		}

		label {
			font-weight: 600;
			color: #f1f1f1;
		}

		input {
			padding: 0.75rem 1rem;
			border-radius: 0.75rem;
			border: 1px solid #3d3d3d;
			background-color: #060606;
			color: inherit;
			font-size: 1rem;
			transition: border-color 150ms ease, box-shadow 150ms ease;
		}

		input:focus {
			outline: none;
			border-color: #ffffff;
			box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);
		}

		button {
			cursor: pointer;
			padding: 0.75rem 1rem;
			border-radius: 0.75rem;
			border: none;
			font-size: 1rem;
			font-weight: 600;
			background-color: #f5f5f5;
			color: #0d0d0d;
			transition: transform 150ms ease, box-shadow 150ms ease;
		}

		button:hover {
			transform: translateY(-1px);
			box-shadow: 0 10px 20px rgba(255, 255, 255, 0.2);
		}

		small {
			display: block;
			margin-top: 0.35rem;
			color: #8a8a8a;
		}

		footer {
			font-size: 0.875rem;
			color: #888888;
			display: flex;
			gap: 0.5rem;
			align-items: center;
		}

		footer a {
			color: inherit;
			text-decoration: none;
			font-weight: 500;
			transition: color 150ms ease;
		}

		footer a:hover {
			color: #f5f5f5;
		}
	</style>
</head>

<body>
	<main>
		<h1>Build your playtime panorama</h1>
		<p>Drop in a SteamID64 or Steam username to generate a wall of cover art scaled by how many minutes you've
			played.
			It's a quick way to see where your hours really went.</p>
		<form id="steam-form">
			<label for="steam-id">
				SteamID64 or username
				<small>Examples: obviyus or 76561198814583839. Profile URLs work too.</small>
			</label>
			<input id="steam-id" name="steam-id" placeholder="obviyus or 7656..." required autocomplete="off" />
			<button type="submit">Show my games</button>
		</form>
	</main>
	<script>
		const form = document.getElementById('steam-form');

		const normalizeSteamIdentifier = (raw) => {
			if (typeof raw !== 'string') {
				return '';
			}

			const trimmed = raw.trim();
			if (!trimmed) {
				return '';
			}

			if (trimmed.includes('steamcommunity.com')) {
				const vanityMatch = trimmed.match(/steamcommunity\.com\/(?:id|profiles)\/([^/?#]+)/i);
				if (vanityMatch && vanityMatch[1]) {
					try {
						return decodeURIComponent(vanityMatch[1]);
					} catch {
						return vanityMatch[1];
					}
				}
			}

			return trimmed.replace(/^\/+/, '').replace(/\/$/, '');
		};

		form?.addEventListener('submit', event => {
			event.preventDefault();
			const formData = new FormData(form);
			const targetId = normalizeSteamIdentifier(formData.get('steam-id'));

			if (targetId) {
				const url = '/' + encodeURIComponent(targetId);
				window.location.assign(url);
			}
		});
	</script>
	<footer>
		<span>Built by</span>
		<a href="https://github.com/obviyus" target="_blank" rel="noreferrer">@obviyus</a>
		<span>â€¢</span>
		<a href="https://github.com/obviyus/playtime-panorama" target="_blank" rel="noreferrer">Source Code on
			GitHub</a>
	</footer>
</body>

</html>